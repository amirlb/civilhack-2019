import React, { Component } from 'react';
import axios from 'axios';
import { Map as LeafletMap, Marker, Popup, TileLayer, Polyline, Tooltip, CircleMarker, LayerGroup, LayersControl, FeatureGroup, Circle, Rectangle } from 'react-leaflet'

import 'leaflet/dist/leaflet.css';
import L from 'leaflet';

delete L.Icon.Default.prototype._getIconUrl;

L.Icon.Default.mergeOptions({
  iconRetinaUrl: require('leaflet/dist/images/marker-icon-2x.png'),
  iconUrl: require('leaflet/dist/images/marker-icon.png'),
  shadowUrl: require('leaflet/dist/images/marker-shadow.png')
});

const { BaseLayer, Overlay } = LayersControl
const position = [32.1712, 34.9043];
const center = [32.1712, 34.9043];
const rectangle = [[32.1712, 34.9043], [32.0712, 34.8043]];

const colors = ['#0496ec', '#f71904', '#2c22bf', '#6a57d4', '#f930be'];

const res = {"stops":{"20047":{"coords":[32.111697,34.792204],"lines":["349","149"]},"20064":{"coords":[32.12212,34.794165],"lines":["349","149"]},"20099":{"coords":[32.132818,34.796381],"lines":["349","149"]},"20105":{"coords":[32.136707,34.798164],"lines":["349","149"]},"20112":{"coords":[32.140196,34.800765999999996],"lines":["349","149"]},"20195":{"coords":[32.125763,34.825759999999995],"lines":["231"]},"20348":{"coords":[32.085267,34.795006],"lines":["349","149"]},"20349":{"coords":[32.081367,34.794199],"lines":["349","149"]},"20377":{"coords":[32.135579,34.833007],"lines":["349","149"]},"21150":{"coords":[32.075664,34.782893],"lines":["349","149"]},"21188":{"coords":[32.095376,34.794137],"lines":["349","149"]},"21219":{"coords":[32.128115,34.828144],"lines":["231"]},"21520":{"coords":[32.0796,34.780657],"lines":["349","149"]},"21525":{"coords":[32.12048,34.819656],"lines":["231"]},"21534":{"coords":[32.090293,34.795303000000004],"lines":["349","149"]},"21543":{"coords":[32.07329,34.774834999999996],"lines":["349","149","231"]},"21544":{"coords":[32.076736,34.787867999999996],"lines":["349","149"]},"21565":{"coords":[32.121877000000005,34.821768],"lines":["231"]},"21633":{"coords":[32.132715000000005,34.831902],"lines":["231"]},"21716":{"coords":[32.107454,34.814433],"lines":["231"]},"21718":{"coords":[32.102578,34.805312],"lines":["231"]},"22919":{"coords":[32.105529,34.812227],"lines":["231"]},"22920":{"coords":[32.096871,34.775888],"lines":["231"]},"22988":{"coords":[32.065619,34.772033],"lines":["349","149"]},"22989":{"coords":[32.068606,34.770781],"lines":["231"]},"23020":{"coords":[32.064609000000004,34.772476],"lines":["349","231"]},"23074":{"coords":[32.104601,34.810684],"lines":["231"]},"25071":{"coords":[32.101566,34.792854],"lines":["349","149"]},"25485":{"coords":[32.064693,34.769228000000005],"lines":["149"]},"25556":{"coords":[32.071897,34.773361],"lines":["349","149"]},"25565":{"coords":[32.075423,34.775129],"lines":["231"]},"25617":{"coords":[32.076896999999995,34.777315],"lines":["349","149"]},"25732":{"coords":[32.077809,34.791077],"lines":["349","149"]},"25774":{"coords":[32.080952,34.773763],"lines":["231"]},"25787":{"coords":[32.085415000000005,34.774508000000004],"lines":["231"]},"25830":{"coords":[32.08873,34.775334],"lines":["231"]},"25833":{"coords":[32.091443,34.776014],"lines":["231"]},"26424":{"coords":[32.110352,34.81622],"lines":["231"]},"26427":{"coords":[32.112324,34.816536],"lines":["231"]},"26701":{"coords":[32.140522,34.804401],"lines":["149"]},"26703":{"coords":[32.115783,34.817064],"lines":["231"]},"26707":{"coords":[32.117934999999996,34.81792],"lines":["231"]},"26742":{"coords":[32.138865,34.817584000000004],"lines":["349"]},"26744":{"coords":[32.143364,34.816839],"lines":["149"]},"26835":{"coords":[32.125721999999996,34.85403],"lines":["349","149"]},"27228":{"coords":[32.067985,34.770998],"lines":["349","149"]},"30300":{"coords":[32.173774,34.892692],"lines":["231"]},"32734":{"coords":[32.143188,34.894364],"lines":["231"]},"32996":{"coords":[32.158634,34.894247],"lines":["231"]},"33845":{"coords":[32.162325,34.894044],"lines":["231"]},"37018":{"coords":[32.177906,34.894049],"lines":["349","149","231"]},"37019":{"coords":[32.177977,34.897175],"lines":["349","149","231"]},"37028":{"coords":[32.177245,34.900307],"lines":["349","149","231"]},"37030":{"coords":[32.176398,34.903889],"lines":["349","149","231"]},"37119":{"coords":[32.174882000000004,34.890699],"lines":["349","149"]},"37153":{"coords":[32.128739,34.902789],"lines":["231"]},"37206":{"coords":[32.154645,34.894503],"lines":["231"]},"37208":{"coords":[32.146553000000004,34.894463],"lines":["231"]},"37209":{"coords":[32.137303,34.896268],"lines":["231"]},"37254":{"coords":[32.132375,34.89996],"lines":["231"]},"39751":{"coords":[32.122114,34.902412],"lines":["231"]}},"trips":[[{"from":[32.17524384183428,34.90229572635145],"instruction":"walk","meters":197.37449647353898,"to":[32.176398,34.903889]},{"alternative":"#","instruction":"take bus","line_number":"349","long_name":"\u05e9\u05d3\u05e8\u05d5\u05ea \u05d4\u05d0\u05e8\u05e5/\u05d3\u05e8\u05da \u05d4\u05e4\u05e8\u05d7\u05d9\u05dd-\u05db\u05d5\u05db\u05d1 \u05d9\u05d0\u05d9\u05e8<->\u05ea. \u05de\u05e8\u05db\u05d6\u05d9\u05ea \u05ea''\u05d0 \u05e7. 6/\u05d4\u05d5\u05e8\u05d3\u05d4-\u05ea\u05dc \u05d0\u05d1\u05d9\u05d1 \u05d9\u05e4\u05d5-1#","shape":[[32.17635426084827,34.903875551649456],[32.1765,34.903214],[32.1765,34.903214],[32.176536,34.903065999999995],[32.176536,34.903065999999995],[32.176548,34.903017],[32.176548,34.903017],[32.17661,34.902731],[32.17661,34.902731],[32.176642,34.902594],[32.176642,34.902594],[32.176683000000004,34.902421000000004],[32.176683000000004,34.902421000000004],[32.176772,34.902108],[32.176772,34.902108],[32.177025,34.901052],[32.177025,34.901052],[32.177116999999996,34.900657],[32.177116999999996,34.900657],[32.177268,34.900005],[32.177268,34.900005],[32.177388,34.899522],[32.177388,34.899522],[32.177440999999995,34.899308000000005],[32.177440999999995,34.899308000000005],[32.177595000000004,34.898617],[32.177595000000004,34.898617],[32.177793,34.897724],[32.177793,34.897724],[32.17803,34.896774],[32.178045000000004,34.896716],[32.178045000000004,34.896716],[32.178164,34.896146],[32.178164,34.896146],[32.178304,34.895627000000005],[32.178304,34.895627000000005],[32.178379,34.895373],[32.178379,34.895373],[32.178399,34.895308],[32.178399,34.895308],[32.178488,34.89509],[32.178488,34.89509],[32.17855,34.894967],[32.17855,34.894967],[32.178589,34.894886],[32.178589,34.894886],[32.178529,34.894819],[32.178529,34.894819],[32.17835,34.894616],[32.17835,34.894616],[32.177015000000004,34.893131],[32.177015000000004,34.893131],[32.175821,34.891796],[32.175821,34.891796],[32.175424,34.891321999999995],[32.175424,34.891321999999995],[32.175325,34.891224],[32.175325,34.891224],[32.175067999999996,34.890992],[32.175067999999996,34.890992],[32.174958000000004,34.890865999999995],[32.174958000000004,34.890865999999995],[32.174822,34.890702000000005],[32.174822,34.890702000000005],[32.174665999999995,34.890526],[32.174665999999995,34.890526],[32.174617,34.890471000000005],[32.174617,34.890471000000005],[32.174492,34.890334],[32.174492,34.890334],[32.174248,34.890081],[32.174248,34.890081],[32.17367,34.889448],[32.174085,34.889914000000005],[32.173412,34.8892],[32.173546,34.889297],[32.17328,34.88896],[32.17338400000001,34.889038],[32.173164,34.888714],[32.173221000000005,34.888675],[32.173096,34.888511],[32.173146,34.888443],[32.173048,34.888351],[32.173086,34.888194],[32.173027000000005,34.88816],[32.173041999999995,34.887992],[32.172987,34.887533000000005],[32.173010999999995,34.887743],[32.172944,34.886872],[32.172971999999994,34.887318],[32.172948,34.88639000000001],[32.172959999999996,34.887088],[32.172948999999996,34.88687],[32.172984,34.885684999999995],[32.172957000000004,34.886296],[32.172959999999996,34.885422],[32.172937,34.88532],[32.172961,34.885931],[32.172843,34.885090000000005],[32.172983,34.885698],[32.172691,34.884864],[32.172975,34.8855],[32.172433000000005,34.884578000000005],[32.172945,34.885354],[32.172304,34.884449],[32.172901,34.885216],[32.172171999999996,34.884324],[32.172827000000005,34.885061],[32.171929999999996,34.884144],[32.172717,34.884906],[32.171623,34.883953000000005],[32.172592,34.884743],[32.171323,34.883777],[32.172453000000004,34.884606],[32.170796,34.883505],[32.172379,34.88452],[32.1704,34.883291],[32.172151,34.884305],[32.169799,34.882977000000004],[32.17188,34.884108000000005],[32.169094,34.882578],[32.171315,34.883765999999994],[32.168106,34.881914],[32.170772,34.883483],[32.166251,34.88054],[32.170566,34.883371999999994],[32.165756,34.880169],[32.169304,34.882713],[32.165283,34.87985],[32.168893,34.882447],[32.164544,34.879358],[32.168106,34.881914],[32.162978,34.878358],[32.166251,34.88054],[32.162551,34.878083000000004],[32.165756,34.880169],[32.162379,34.87797],[32.165283,34.87985],[32.162227,34.877875],[32.164544,34.879358],[32.161908000000004,34.877678],[32.162978,34.878358],[32.160895000000004,34.877046],[32.162551,34.878083000000004],[32.160531,34.876806],[32.162379,34.87797],[32.159957,34.876436],[32.162227,34.877875],[32.159634999999994,34.876228999999995],[32.161908000000004,34.877678],[32.159362,34.876033],[32.160895000000004,34.877046],[32.159267,34.875966999999996],[32.160531,34.876806],[32.15916,34.875889],[32.159957,34.876436],[32.159052,34.875793],[32.159634999999994,34.876228999999995],[32.158941,34.875701],[32.159362,34.876033],[32.158691,34.875475],[32.159267,34.875966999999996],[32.158234,34.875012],[32.15916,34.875889],[32.157975,34.87472],[32.159052,34.875793],[32.157209,34.873905],[32.158941,34.875701],[32.157003,34.873678999999996],[32.158691,34.875475],[32.156813,34.873505],[32.158234,34.875012],[32.156655,34.873364],[32.157975,34.87472],[32.156531,34.873272],[32.157209,34.873905],[32.156461,34.873217],[32.157003,34.873678999999996],[32.156306,34.873106],[32.156813,34.873505],[32.156053,34.872939],[32.156655,34.873364],[32.155806,34.872814],[32.156531,34.873272],[32.155483000000004,34.872673999999996],[32.156461,34.873217],[32.155275,34.872603999999995],[32.156306,34.873106],[32.155006,34.87252],[32.156053,34.872939],[32.15475900000001,34.872465000000005],[32.155806,34.872814],[32.15455,34.872428],[32.155483000000004,34.872673999999996],[32.15437,34.87240300000001],[32.155275,34.872603999999995],[32.154152,34.872384999999994],[32.155006,34.87252],[32.154,34.872386],[32.15475900000001,34.872465000000005],[32.153786,34.872394],[32.15455,34.872428],[32.153289,34.872448],[32.15437,34.87240300000001],[32.152992,34.872505],[32.154152,34.872384999999994],[32.152547,34.872584],[32.154,34.872386],[32.151157,34.872838],[32.153786,34.872394],[32.150456,34.872956],[32.153289,34.872448],[32.149518,34.873126],[32.152992,34.872505],[32.148641999999995,34.873282],[32.152547,34.872584],[32.14779,34.87343],[32.151157,34.872838],[32.147098,34.873529],[32.150456,34.872956],[32.146889,34.873567],[32.149518,34.873126],[32.146703,34.873579],[32.148641999999995,34.873282],[32.146392999999996,34.873606],[32.14779,34.87343],[32.145909,34.873634],[32.147098,34.873529],[32.14547,34.873635],[32.146889,34.873567],[32.145053000000004,34.873626],[32.146703,34.873579],[32.144734,34.873608000000004],[32.146392999999996,34.873606],[32.144307,34.873560999999995],[32.145909,34.873634],[32.14209,34.873168],[32.14547,34.873635],[32.141518,34.873051000000004],[32.145053000000004,34.873626],[32.140674,34.872890999999996],[32.144734,34.873608000000004],[32.140184000000005,34.872778000000004],[32.144307,34.873560999999995],[32.139728000000005,34.872657000000004],[32.14209,34.873168],[32.139424,34.87255],[32.141518,34.873051000000004],[32.138746999999995,34.872267],[32.140674,34.872890999999996],[32.138551,34.872171],[32.140184000000005,34.872778000000004],[32.138257,34.872038],[32.139728000000005,34.872657000000004],[32.137469,34.871677000000005],[32.139424,34.87255],[32.136884,34.871412],[32.138746999999995,34.872267],[32.136171000000004,34.871076],[32.138551,34.872171],[32.136164,34.871072999999996],[32.138257,34.872038],[32.135805,34.870944],[32.137469,34.871677000000005],[32.135605,34.870881],[32.136884,34.871412],[32.135286,34.870823],[32.136171000000004,34.871076],[32.134954,34.870771999999995],[32.136164,34.871072999999996],[32.134685,34.870773],[32.135805,34.870944],[32.13363,34.870822],[32.135605,34.870881],[32.1335,34.87082],[32.135286,34.870823],[32.132227,34.870912],[32.134954,34.870771999999995],[32.131840999999994,34.870925],[32.134685,34.870773],[32.131454,34.87092],[32.13363,34.870822],[32.131291999999995,34.870903999999996],[32.1335,34.87082],[32.130974,34.870865],[32.132227,34.870912],[32.13071,34.870802000000005],[32.131840999999994,34.870925],[32.130687,34.870795],[32.131454,34.87092],[32.130489000000004,34.870723],[32.131291999999995,34.870903999999996],[32.130182,34.870585999999996],[32.130974,34.870865],[32.130032,34.870508],[32.13071,34.870802000000005],[32.129839000000004,34.870412],[32.130687,34.870795],[32.129806,34.870391999999995],[32.130489000000004,34.870723],[32.129633,34.870286],[32.130182,34.870585999999996],[32.129359,34.870090999999995],[32.130032,34.870508],[32.129348,34.870083],[32.129839000000004,34.870412],[32.129139,34.869902],[32.129806,34.870391999999995],[32.128807,34.869587],[32.129633,34.870286],[32.128616,34.869358],[32.129359,34.870090999999995],[32.128479999999996,34.869172999999996],[32.129348,34.870083],[32.128277000000004,34.86888],[32.129139,34.869902],[32.128106,34.868606],[32.128807,34.869587],[32.127947,34.868320000000004],[32.128616,34.869358],[32.127845,34.868094],[32.128479999999996,34.869172999999996],[32.127696,34.867746000000004],[32.128277000000004,34.86888],[32.127635,34.867579],[32.128106,34.868606],[32.127581,34.867412],[32.127947,34.868320000000004],[32.127501,34.8671],[32.127845,34.868094],[32.127456,34.866851000000004],[32.127696,34.867746000000004],[32.127408,34.866495],[32.127635,34.867579],[32.127327,34.865734],[32.127581,34.867412],[32.127239,34.864769],[32.127501,34.8671],[32.127194,34.864209],[32.127456,34.866851000000004],[32.127008000000004,34.862204999999996],[32.127408,34.866495],[32.126827,34.860461],[32.127327,34.865734],[32.126809,34.86025],[32.127239,34.864769],[32.126781,34.860017],[32.127194,34.864209],[32.126713,34.8597],[32.127008000000004,34.862204999999996],[32.126627,34.859367999999996],[32.126827,34.860461],[32.126406,34.858726000000004],[32.126809,34.86025],[32.125977,34.857578000000004],[32.126781,34.860017],[32.125819,34.857215999999994],[32.126713,34.8597],[32.12565900000001,34.856888],[32.126627,34.859367999999996],[32.125458,34.856538],[32.126406,34.858726000000004],[32.125397,34.856411],[32.125977,34.857578000000004],[32.12535,34.856259],[32.125819,34.857215999999994],[32.125325,34.856119],[32.12565900000001,34.856888],[32.125312,34.856001],[32.125458,34.856538],[32.125305,34.855799],[32.125397,34.856411],[32.12531,34.855524],[32.12535,34.856259],[32.125325,34.856119],[32.125331,34.855167],[32.125312,34.856001],[32.125357,34.85498],[32.125305,34.855799],[32.125397,34.854795],[32.12531,34.855524],[32.125453,34.854627],[32.125331,34.855167],[32.12553,34.854415],[32.125357,34.85498],[32.125601,34.854225],[32.125397,34.854795],[32.125685,34.853997],[32.125453,34.854627],[32.125939,34.853291999999996],[32.12553,34.854415],[32.126443,34.851966],[32.125601,34.854225],[32.126784,34.851116999999995],[32.125685,34.853997],[32.126969,34.850632],[32.125939,34.853291999999996],[32.127274,34.849821999999996],[32.126443,34.851966],[32.127697999999995,34.848731],[32.126784,34.851116999999995],[32.128377,34.847148],[32.126969,34.850632],[32.128849,34.846108],[32.127274,34.849821999999996],[32.13029,34.8426],[32.127697999999995,34.848731],[32.130807,34.841426],[32.128377,34.847148],[32.130905,34.841201],[32.128849,34.846108],[32.13234,34.837786],[32.13029,34.8426],[32.13263,34.837118],[32.130807,34.841426],[32.132971999999995,34.836406],[32.130905,34.841201],[32.133153,34.836067],[32.13234,34.837786],[32.133269,34.835871000000004],[32.13263,34.837118],[32.133548,34.83551],[32.132971999999995,34.836406],[32.133801,34.835198],[32.133153,34.836067],[32.133915,34.835063],[32.133269,34.835871000000004],[32.134246999999995,34.834731],[32.133548,34.83551],[32.134381,34.834602000000004],[32.133801,34.835198],[32.134632,34.834379999999996],[32.133915,34.835063],[32.134856,34.834178],[32.134246999999995,34.834731],[32.13495,34.834072],[32.134381,34.834602000000004],[32.135093,34.833873],[32.134632,34.834379999999996],[32.135172999999995,34.83375],[32.134856,34.834178],[32.135207,34.833675],[32.13495,34.834072],[32.135253999999996,34.833568],[32.135093,34.833873],[32.135381,34.833362],[32.135172999999995,34.83375],[32.135476000000004,34.833141999999995],[32.135207,34.833675],[32.135554,34.832944],[32.135253999999996,34.833568],[32.135898,34.831916],[32.135381,34.833362],[32.136192,34.831129],[32.135476000000004,34.833141999999995],[32.136421999999996,34.830501],[32.135554,34.832944],[32.13667,34.829793],[32.135898,34.831916],[32.136872,34.829152],[32.136192,34.831129],[32.137034,34.828534000000005],[32.136421999999996,34.830501],[32.13718,34.827897],[32.13667,34.829793],[32.137249,34.827494],[32.136872,34.829152],[32.137339000000004,34.826944],[32.137034,34.828534000000005],[32.137525,34.826021000000004],[32.13718,34.827897],[32.137704,34.825117999999996],[32.137249,34.827494],[32.138003999999995,34.823565],[32.137339000000004,34.826944],[32.138065999999995,34.82326],[32.137525,34.826021000000004],[32.138376,34.821723999999996],[32.137704,34.825117999999996],[32.138523,34.821026],[32.138003999999995,34.823565],[32.138571999999996,34.820775],[32.138065999999995,34.82326],[32.138643,34.820378000000005],[32.138376,34.821723999999996],[32.138698,34.820018],[32.138523,34.821026],[32.138743,34.819649],[32.138571999999996,34.820775],[32.138775,34.819334999999995],[32.138643,34.820378000000005],[32.13882,34.818661999999996],[32.138698,34.820018],[32.138815,34.818652],[32.138743,34.819649],[32.138822,34.818125],[32.138775,34.819334999999995],[32.138821,34.817794],[32.13882,34.817498],[32.13882,34.818661999999996],[32.138815,34.818652],[32.138822999999995,34.817153000000005],[32.138795,34.816665],[32.138822,34.818125],[32.138769,34.816241999999995],[32.138821,34.817794],[32.138690000000004,34.815057],[32.13882,34.817498],[32.138636,34.81415],[32.138822999999995,34.817153000000005],[32.13862,34.813793],[32.138795,34.816665],[32.138607,34.813427000000004],[32.138769,34.816241999999995],[32.138603,34.813218],[32.138690000000004,34.815057],[32.138618,34.812956],[32.138636,34.81415],[32.13862,34.813793],[32.138639000000005,34.812729],[32.138607,34.813427000000004],[32.138697,34.812359],[32.138603,34.813218],[32.138733,34.812119],[32.138618,34.812956],[32.138781,34.811909],[32.138639000000005,34.812729],[32.138843,34.811687],[32.138697,34.812359],[32.138931,34.811425],[32.138733,34.812119],[32.139093,34.810987],[32.138781,34.811909],[32.139225,34.810681],[32.138843,34.811687],[32.139455,34.810239],[32.138931,34.811425],[32.1395,34.810156],[32.139093,34.810987],[32.139641999999995,34.80985],[32.139225,34.810681],[32.139769,34.809583],[32.139455,34.810239],[32.139958,34.809160999999996],[32.1395,34.810156],[32.140024,34.808995],[32.139641999999995,34.80985],[32.140071,34.808868],[32.139769,34.809583],[32.140138,34.808671000000004],[32.139958,34.809160999999996],[32.14024000000001,34.808335],[32.140024,34.808995],[32.140284,34.808166],[32.140071,34.808868],[32.140327,34.807978999999996],[32.140138,34.808671000000004],[32.140366,34.80775],[32.14024000000001,34.808335],[32.140415999999995,34.807359000000005],[32.140284,34.808166],[32.140439,34.807140999999994],[32.140327,34.807978999999996],[32.140457,34.806953],[32.140366,34.80775],[32.140509,34.806267],[32.140415999999995,34.807359000000005],[32.140516,34.80608400000001],[32.140439,34.807140999999994],[32.14051,34.805814],[32.140457,34.806953],[32.140511,34.805122999999995],[32.140477000000004,34.804403],[32.140509,34.806267],[32.140478,34.804122],[32.140516,34.80608400000001],[32.140495,34.803940999999995],[32.14051,34.805814],[32.140507,34.803862],[32.140511,34.805122999999995],[32.140477000000004,34.804403],[32.140528,34.803774],[32.140478,34.804122],[32.140556,34.803682],[32.140495,34.803940999999995],[32.140592,34.803584],[32.140507,34.803862],[32.14062,34.80352],[32.140528,34.803774],[32.140664,34.803447],[32.140556,34.803682],[32.140721,34.803358],[32.140592,34.803584],[32.14077,34.803284999999995],[32.14062,34.80352],[32.140832,34.803205],[32.140664,34.803447],[32.140889,34.803144],[32.140721,34.803358],[32.140959,34.803079],[32.14077,34.803284999999995],[32.14105,34.803000000000004],[32.140832,34.803205],[32.141135,34.802935],[32.140889,34.803144],[32.141306,34.802758000000004],[32.140959,34.803079],[32.141412,34.80265],[32.14105,34.803000000000004],[32.141523,34.802528],[32.141135,34.802935],[32.141668,34.802322],[32.141306,34.802758000000004],[32.141732,34.802191],[32.141412,34.80265],[32.141779,34.802087],[32.141523,34.802528],[32.14181,34.801999],[32.141668,34.802322],[32.141829,34.801903],[32.141732,34.802191],[32.141836,34.801858],[32.141779,34.802087],[32.141843,34.801751],[32.14181,34.801999],[32.141843,34.801733],[32.141824,34.801635],[32.141829,34.801903],[32.141803,34.801584000000005],[32.141836,34.801858],[32.141760999999995,34.801526],[32.141843,34.801751],[32.141236,34.801309],[32.141843,34.801733],[32.140834000000005,34.801144],[32.141824,34.801635],[32.140802,34.80113],[32.141803,34.801584000000005],[32.140586,34.801027000000005],[32.141760999999995,34.801526],[32.140319,34.800893],[32.141236,34.801309],[32.140114000000004,34.800779],[32.140834000000005,34.801144],[32.139666,34.800507],[32.140802,34.80113],[32.139309999999995,34.800256],[32.140586,34.801027000000005],[32.139019,34.800033],[32.140319,34.800893],[32.138694,34.799778],[32.140114000000004,34.800779],[32.138209,34.799383],[32.139666,34.800507],[32.137856,34.799098],[32.139309999999995,34.800256],[32.137648,34.798927],[32.139019,34.800033],[32.137394,34.798722999999995],[32.138694,34.799778],[32.137267,34.798621999999995],[32.138209,34.799383],[32.137075,34.798472],[32.137856,34.799098],[32.136889000000004,34.798336],[32.137648,34.798927],[32.136604,34.798159999999996],[32.137394,34.798722999999995],[32.134184000000005,34.796853999999996],[32.137267,34.798621999999995],[32.134005,34.796766999999996],[32.137075,34.798472],[32.133678,34.796649],[32.136889000000004,34.798336],[32.133238,34.796537],[32.136604,34.798159999999996],[32.133031,34.796487],[32.134184000000005,34.796853999999996],[32.13268,34.796401],[32.134005,34.796766999999996],[32.132038,34.796259],[32.133678,34.796649],[32.131116,34.796043],[32.133238,34.796537],[32.130013,34.795783],[32.133031,34.796487],[32.128541,34.795456],[32.13268,34.796401],[32.12489,34.794752],[32.132038,34.796259],[32.123484999999995,34.79449],[32.131116,34.796043],[32.122783,34.794340999999996],[32.130013,34.795783],[32.122644,34.794311],[32.128541,34.795456],[32.1188,34.793631],[32.12489,34.794752],[32.116601,34.793186999999996],[32.123484999999995,34.79449],[32.11578,34.793021],[32.122783,34.794340999999996],[32.114934999999996,34.792858],[32.122644,34.794311],[32.113296000000005,34.792582],[32.1188,34.793631],[32.113006,34.792525],[32.116601,34.793186999999996],[32.112685,34.792460999999996],[32.11578,34.793021],[32.112518,34.792425],[32.114934999999996,34.792858],[32.112097,34.792332],[32.113296000000005,34.792582],[32.111014000000004,34.792128999999996],[32.113006,34.792525],[32.110443,34.792012],[32.112685,34.792460999999996],[32.109863,34.79193],[32.112518,34.792425],[32.109156,34.791886],[32.112097,34.792332],[32.108544,34.791863],[32.111014000000004,34.792128999999996],[32.108098999999996,34.791837],[32.110443,34.792012],[32.10752,34.791849],[32.109863,34.79193],[32.107310999999996,34.791856],[32.109156,34.791886],[32.106899,34.79189],[32.108544,34.791863],[32.106743,34.791906],[32.108098999999996,34.791837],[32.106162,34.792016],[32.10752,34.791849],[32.105824,34.792074],[32.107310999999996,34.791856],[32.104446,34.792344],[32.106899,34.79189],[32.104321,34.792371],[32.106743,34.791906],[32.104051,34.792421999999995],[32.106162,34.792016],[32.103802,34.792474],[32.105824,34.792074],[32.102925,34.792606],[32.104446,34.792344],[32.102881,34.792614],[32.104321,34.792371],[32.102828,34.792626],[32.104051,34.792421999999995],[32.102667,34.792664],[32.103802,34.792474],[32.102307,34.792747999999996],[32.102925,34.792606],[32.102176,34.792771],[32.102881,34.792614],[32.102002,34.792806],[32.102828,34.792626],[32.101698999999996,34.792877000000004],[32.102667,34.792664],[32.101659000000005,34.792885999999996],[32.102307,34.792747999999996],[32.101498,34.792925],[32.102176,34.792771],[32.100984000000004,34.793062],[32.102002,34.792806],[32.100521,34.793175],[32.101698999999996,34.792877000000004],[32.099919,34.793296999999995],[32.101659000000005,34.792885999999996],[32.099846,34.79332],[32.101498,34.792925],[32.099804,34.793326],[32.100984000000004,34.793062],[32.099695000000004,34.793345],[32.100521,34.793175],[32.099259,34.793392],[32.099919,34.793296999999995],[32.099001,34.793418],[32.099846,34.79332],[32.098015000000004,34.793507],[32.099804,34.793326],[32.097852,34.793532],[32.099695000000004,34.793345],[32.097534,34.793593],[32.099259,34.793392],[32.097143,34.79371],[32.099001,34.793418],[32.097083000000005,34.793728],[32.098015000000004,34.793507],[32.097002,34.793752000000005],[32.097852,34.793532],[32.096765999999995,34.793819],[32.097534,34.793593],[32.095290999999996,34.794215],[32.097143,34.79371],[32.094516999999996,34.794422999999995],[32.097083000000005,34.793728],[32.092521000000005,34.794895000000004],[32.097002,34.793752000000005],[32.091714,34.795063],[32.096765999999995,34.793819],[32.091268,34.79518],[32.095290999999996,34.794215],[32.091161,34.795215999999996],[32.094516999999996,34.794422999999995],[32.090872999999995,34.795257],[32.092521000000005,34.794895000000004],[32.090418,34.795344],[32.091714,34.795063],[32.090198,34.795365999999994],[32.091268,34.79518],[32.089921999999994,34.795402],[32.091161,34.795215999999996],[32.089565,34.795435],[32.090872999999995,34.795257],[32.089203999999995,34.795459],[32.090418,34.795344],[32.089012,34.795473],[32.090198,34.795365999999994],[32.088640000000005,34.79548],[32.089921999999994,34.795402],[32.088529,34.795484],[32.089565,34.795435],[32.088159000000005,34.795483000000004],[32.089203999999995,34.795459],[32.087701,34.795473],[32.089012,34.795473],[32.087206,34.795412],[32.088640000000005,34.79548],[32.086815,34.795390999999995],[32.088529,34.795484],[32.086425,34.795325],[32.088159000000005,34.795483000000004],[32.086139,34.795246999999996],[32.087701,34.795473],[32.085776,34.795159999999996],[32.087206,34.795412],[32.085698,34.795134000000004],[32.086815,34.795390999999995],[32.085324,34.79507],[32.086425,34.795325],[32.083354,34.794706],[32.086139,34.795246999999996],[32.082993,34.794624],[32.085776,34.795159999999996],[32.082683,34.794544],[32.085698,34.795134000000004],[32.082568,34.794514],[32.085324,34.79507],[32.081928000000005,34.794366],[32.083354,34.794706],[32.080563,34.794089],[32.082993,34.794624],[32.080147,34.793981],[32.082683,34.794544],[32.079971,34.793907],[32.082568,34.794514],[32.079799,34.793822],[32.081928000000005,34.794366],[32.079574,34.793690000000005],[32.080563,34.794089],[32.079373,34.793544],[32.080147,34.793981],[32.079178999999996,34.793393],[32.079971,34.793907],[32.078631,34.792814],[32.079799,34.793822],[32.078497,34.792640999999996],[32.079574,34.793690000000005],[32.078348,34.792438],[32.079373,34.793544],[32.078171000000005,34.792142],[32.079178999999996,34.793393],[32.078037,34.791866999999996],[32.078631,34.792814],[32.077888,34.791461],[32.078497,34.792640999999996],[32.077847999999996,34.791339],[32.078348,34.792438],[32.077664,34.790787],[32.078171000000005,34.792142],[32.077521000000004,34.790354],[32.078037,34.791866999999996],[32.077413,34.790026],[32.077888,34.791461],[32.077129,34.789168],[32.077847999999996,34.791339],[32.07703,34.788872],[32.077664,34.790787],[32.076999,34.788781],[32.077521000000004,34.790354],[32.076655,34.787775],[32.077413,34.790026],[32.076414,34.787081],[32.077129,34.789168],[32.076021999999995,34.785906],[32.07703,34.788872],[32.075893,34.785416999999995],[32.076999,34.788781],[32.075773,34.784833],[32.076655,34.787775],[32.075718,34.784442999999996],[32.076414,34.787081],[32.07571,34.784356],[32.076021999999995,34.785906],[32.0757,34.784239],[32.075893,34.785416999999995],[32.075671,34.783912],[32.075773,34.784833],[32.075639,34.783406],[32.075718,34.784442999999996],[32.075616,34.782823],[32.07571,34.784356],[32.075586,34.782014000000004],[32.0757,34.784239],[32.075577,34.781779],[32.075671,34.783912],[32.075573999999996,34.781703],[32.075639,34.783406],[32.075616,34.782823],[32.075928999999995,34.781647],[32.075586,34.782014000000004],[32.076256,34.781578],[32.075577,34.781779],[32.076863,34.781459000000005],[32.075573999999996,34.781703],[32.07752,34.781374],[32.075928999999995,34.781647],[32.077574,34.781364],[32.076256,34.781578],[32.077812,34.781355],[32.076863,34.781459000000005],[32.078163,34.781341999999995],[32.07752,34.781374],[32.078519,34.781343],[32.077574,34.781364],[32.079471000000005,34.781357],[32.077812,34.781355],[32.079563,34.781357],[32.078163,34.781341999999995],[32.079559,34.781183],[32.078519,34.781343],[32.079558,34.781128],[32.079471000000005,34.781357],[32.079553999999995,34.780964000000004],[32.079556,34.78054],[32.079563,34.781357],[32.079558,34.780053],[32.079559,34.781183],[32.079558,34.77997],[32.079558,34.781128],[32.079553999999995,34.780964000000004],[32.079559,34.779859],[32.079556,34.78054],[32.079559,34.779756],[32.079558,34.780053],[32.079565,34.779538],[32.079558,34.77997],[32.079567,34.779489],[32.079559,34.779859],[32.079578999999995,34.779209],[32.079559,34.779756],[32.079584000000004,34.779123999999996],[32.079505,34.779125],[32.079565,34.779538],[32.079411,34.77913],[32.079567,34.779489],[32.079308000000005,34.779119],[32.079578999999995,34.779209],[32.079243,34.779078000000005],[32.079584000000004,34.779123999999996],[32.07906,34.778884999999995],[32.079505,34.779125],[32.078941,34.77876],[32.079411,34.77913],[32.078878,34.778690000000005],[32.079308000000005,34.779119],[32.078808,34.778605999999996],[32.079243,34.779078000000005],[32.078275,34.778077],[32.07906,34.778884999999995],[32.078241,34.778044],[32.078941,34.77876],[32.07819,34.778024],[32.078878,34.778690000000005],[32.078146000000004,34.778011],[32.078808,34.778605999999996],[32.07809,34.778034000000005],[32.078275,34.778077],[32.078049,34.778063],[32.078241,34.778044],[32.07793,34.778207],[32.07819,34.778024],[32.077346,34.777729],[32.078146000000004,34.778011],[32.077213,34.777625],[32.07809,34.778034000000005],[32.076274,34.776893],[32.078049,34.778063],[32.076021000000004,34.776680999999996],[32.07793,34.778207],[32.075589,34.776379],[32.077346,34.777729],[32.075478000000004,34.776308],[32.077213,34.777625],[32.0752,34.776128],[32.076274,34.776893],[32.074795,34.775863],[32.076021000000004,34.776680999999996],[32.074548,34.775729],[32.075589,34.776379],[32.074413,34.775656],[32.075478000000004,34.776308],[32.074335999999995,34.775575],[32.0752,34.776128],[32.074059000000005,34.775381],[32.074795,34.775863],[32.073972,34.775327000000004],[32.074548,34.775729],[32.07375,34.775195000000004],[32.074413,34.775656],[32.073588,34.775096000000005],[32.074335999999995,34.775575],[32.073427,34.774994],[32.074059000000005,34.775381],[32.073301,34.774907],[32.073972,34.775327000000004],[32.073074,34.774736],[32.07375,34.775195000000004],[32.072868,34.774547],[32.073588,34.775096000000005],[32.072787,34.774464],[32.073427,34.774994],[32.072536,34.774194],[32.073301,34.774907],[32.072432,34.774118],[32.073074,34.774736],[32.072096,34.773694],[32.072868,34.774547],[32.07173,34.773225],[32.072787,34.774464],[32.071621,34.773078999999996],[32.072536,34.774194],[32.071328,34.772682],[32.072432,34.774118],[32.071205,34.772515999999996],[32.072096,34.773694],[32.071121999999995,34.772413],[32.07173,34.773225],[32.07089000000001,34.772118],[32.071621,34.773078999999996],[32.070709,34.771863],[32.071328,34.772682],[32.070378999999996,34.771322999999995],[32.071205,34.772515999999996],[32.070246999999995,34.771105],[32.071121999999995,34.772413],[32.06988,34.770503999999995],[32.07089000000001,34.772118],[32.069256,34.770685],[32.070709,34.771863],[32.068417,34.770879],[32.070378999999996,34.771322999999995],[32.067574,34.77122],[32.070246999999995,34.771105],[32.06729,34.771337],[32.06988,34.770503999999995],[32.067001,34.771456],[32.069256,34.770685],[32.066472999999995,34.771701],[32.068417,34.770879],[32.065882,34.771971],[32.067574,34.77122],[32.065348,34.772211],[32.06729,34.771337],[32.064788,34.772455],[32.067001,34.771456],[32.064221999999994,34.772701],[32.066472999999995,34.771701],[32.0646212585147,34.772514924262914]],"stops":[{"coords":[32.176398,34.903889],"id":"37030"},{"coords":[32.177245,34.900307],"id":"37028"},{"coords":[32.177977,34.897175],"id":"37019"},{"coords":[32.177906,34.894049],"id":"37018"},{"coords":[32.174882000000004,34.890699],"id":"37119"},{"coords":[32.125721999999996,34.85403],"id":"26835"},{"coords":[32.135579,34.833007],"id":"20377"},{"coords":[32.138865,34.817584000000004],"id":"26742"},{"coords":[32.140196,34.800765999999996],"id":"20112"},{"coords":[32.136707,34.798164],"id":"20105"},{"coords":[32.132818,34.796381],"id":"20099"},{"coords":[32.12212,34.794165],"id":"20064"},{"coords":[32.111697,34.792204],"id":"20047"},{"coords":[32.101566,34.792854],"id":"25071"},{"coords":[32.095376,34.794137],"id":"21188"},{"coords":[32.090293,34.795303000000004],"id":"21534"},{"coords":[32.085267,34.795006],"id":"20348"},{"coords":[32.081367,34.794199],"id":"20349"},{"coords":[32.077809,34.791077],"id":"25732"},{"coords":[32.076736,34.787867999999996],"id":"21544"},{"coords":[32.075664,34.782893],"id":"21150"},{"coords":[32.0796,34.780657],"id":"21520"},{"coords":[32.076896999999995,34.777315],"id":"25617"},{"coords":[32.07329,34.774834999999996],"id":"21543"},{"coords":[32.071897,34.773361],"id":"25556"},{"coords":[32.067985,34.770998],"id":"27228"},{"coords":[32.065619,34.772033],"id":"22988"},{"coords":[32.064609000000004,34.772476],"id":"23020"}]},{"from":[32.064609000000004,34.772476],"instruction":"walk","meters":201.6298929102967,"to":[32.0629359110397,34.77165098302067]}],[{"from":[32.17524384183428,34.90229572635145],"instruction":"walk","meters":197.37449647353898,"to":[32.176398,34.903889]},{"alternative":"#","instruction":"take bus","line_number":"149","long_name":"\u05d0\u05d9\u05d6\u05d5\u05e8 \u05d4\u05ea\u05e2\u05e9\u05d9\u05d4 \u05db\u05e4\u05e8 \u05e1\u05d1\u05d0-\u05db\u05e4\u05e8 \u05e1\u05d1\u05d0<->\u05de\u05e1\u05d5\u05e3 \u05db\u05e8\u05de\u05dc\u05d9\u05ea/\u05d4\u05db\u05e8\u05de\u05dc-\u05ea\u05dc \u05d0\u05d1\u05d9\u05d1 \u05d9\u05e4\u05d5-1#","shape":[[32.17635426084827,34.903875551649456],[32.1765,34.903214],[32.176536,34.903065999999995],[32.176548,34.903017],[32.17661,34.902731],[32.176642,34.902594],[32.176683000000004,34.902421000000004],[32.176772,34.902108],[32.177025,34.901052],[32.177116999999996,34.900657],[32.177268,34.900005],[32.177388,34.899522],[32.177440999999995,34.899308000000005],[32.177595000000004,34.898617],[32.177793,34.897724],[32.17803,34.896774],[32.178045000000004,34.896716],[32.178164,34.896146],[32.178304,34.895627000000005],[32.178379,34.895373],[32.178399,34.895308],[32.178488,34.89509],[32.17855,34.894967],[32.178589,34.894886],[32.178529,34.894819],[32.17835,34.894616],[32.177015000000004,34.893131],[32.175821,34.891796],[32.175424,34.891321999999995],[32.175325,34.891224],[32.175067999999996,34.890992],[32.174958000000004,34.890865999999995],[32.174822,34.890702000000005],[32.174665999999995,34.890526],[32.174617,34.890471000000005],[32.174492,34.890334],[32.174248,34.890081],[32.17367,34.889448],[32.173546,34.889297],[32.17338400000001,34.889038],[32.173221000000005,34.888675],[32.173146,34.888443],[32.173086,34.888194],[32.173041999999995,34.887992],[32.173010999999995,34.887743],[32.172944,34.886872],[32.172948,34.88639000000001],[32.172984,34.885684999999995],[32.172959999999996,34.885422],[32.172937,34.88532],[32.172843,34.885090000000005],[32.172691,34.884864],[32.172433000000005,34.884578000000005],[32.172304,34.884449],[32.172171999999996,34.884324],[32.171929999999996,34.884144],[32.171623,34.883953000000005],[32.171323,34.883777],[32.170796,34.883505],[32.1704,34.883291],[32.169799,34.882977000000004],[32.169094,34.882578],[32.168106,34.881914],[32.166251,34.88054],[32.165756,34.880169],[32.165283,34.87985],[32.164544,34.879358],[32.162978,34.878358],[32.162551,34.878083000000004],[32.162379,34.87797],[32.162227,34.877875],[32.161908000000004,34.877678],[32.160895000000004,34.877046],[32.160531,34.876806],[32.159957,34.876436],[32.159634999999994,34.876228999999995],[32.159362,34.876033],[32.159267,34.875966999999996],[32.15916,34.875889],[32.159052,34.875793],[32.158941,34.875701],[32.158691,34.875475],[32.158234,34.875012],[32.157975,34.87472],[32.157209,34.873905],[32.157003,34.873678999999996],[32.156813,34.873505],[32.156655,34.873364],[32.156531,34.873272],[32.156461,34.873217],[32.156306,34.873106],[32.156053,34.872939],[32.155806,34.872814],[32.155483000000004,34.872673999999996],[32.155275,34.872603999999995],[32.155006,34.87252],[32.15475900000001,34.872465000000005],[32.15455,34.872428],[32.15437,34.87240300000001],[32.154152,34.872384999999994],[32.154,34.872386],[32.153786,34.872394],[32.153289,34.872448],[32.152992,34.872505],[32.152547,34.872584],[32.151157,34.872838],[32.150456,34.872956],[32.149518,34.873126],[32.148641999999995,34.873282],[32.14779,34.87343],[32.147098,34.873529],[32.146889,34.873567],[32.146703,34.873579],[32.146392999999996,34.873606],[32.145909,34.873634],[32.14547,34.873635],[32.145053000000004,34.873626],[32.144734,34.873608000000004],[32.144307,34.873560999999995],[32.14209,34.873168],[32.141518,34.873051000000004],[32.140674,34.872890999999996],[32.140184000000005,34.872778000000004],[32.139728000000005,34.872657000000004],[32.139424,34.87255],[32.138746999999995,34.872267],[32.138551,34.872171],[32.138257,34.872038],[32.137469,34.871677000000005],[32.136884,34.871412],[32.136171000000004,34.871076],[32.136164,34.871072999999996],[32.135805,34.870944],[32.135605,34.870881],[32.135286,34.870823],[32.134954,34.870771999999995],[32.134685,34.870773],[32.13363,34.870822],[32.1335,34.87082],[32.132227,34.870912],[32.131840999999994,34.870925],[32.131454,34.87092],[32.131291999999995,34.870903999999996],[32.130974,34.870865],[32.13071,34.870802000000005],[32.130687,34.870795],[32.130489000000004,34.870723],[32.130182,34.870585999999996],[32.130032,34.870508],[32.129839000000004,34.870412],[32.129806,34.870391999999995],[32.129633,34.870286],[32.129359,34.870090999999995],[32.129348,34.870083],[32.129139,34.869902],[32.128807,34.869587],[32.128616,34.869358],[32.128479999999996,34.869172999999996],[32.128277000000004,34.86888],[32.128106,34.868606],[32.127947,34.868320000000004],[32.127845,34.868094],[32.127696,34.867746000000004],[32.127635,34.867579],[32.127581,34.867412],[32.127501,34.8671],[32.127456,34.866851000000004],[32.127408,34.866495],[32.127327,34.865734],[32.127239,34.864769],[32.127194,34.864209],[32.127008000000004,34.862204999999996],[32.126827,34.860461],[32.126809,34.86025],[32.126781,34.860017],[32.126713,34.8597],[32.126627,34.859367999999996],[32.126406,34.858726000000004],[32.125977,34.857578000000004],[32.125819,34.857215999999994],[32.12565900000001,34.856888],[32.125458,34.856538],[32.125397,34.856411],[32.12535,34.856259],[32.125325,34.856119],[32.125312,34.856001],[32.125305,34.855799],[32.12531,34.855524],[32.125331,34.855167],[32.125357,34.85498],[32.125397,34.854795],[32.125453,34.854627],[32.12553,34.854415],[32.125601,34.854225],[32.125685,34.853997],[32.125939,34.853291999999996],[32.126443,34.851966],[32.126784,34.851116999999995],[32.126969,34.850632],[32.127274,34.849821999999996],[32.127697999999995,34.848731],[32.128377,34.847148],[32.128849,34.846108],[32.13029,34.8426],[32.130807,34.841426],[32.130905,34.841201],[32.13234,34.837786],[32.13263,34.837118],[32.132971999999995,34.836406],[32.133153,34.836067],[32.133269,34.835871000000004],[32.133548,34.83551],[32.133801,34.835198],[32.133915,34.835063],[32.134246999999995,34.834731],[32.134381,34.834602000000004],[32.134632,34.834379999999996],[32.134856,34.834178],[32.13495,34.834072],[32.135093,34.833873],[32.135172999999995,34.83375],[32.135207,34.833675],[32.135253999999996,34.833568],[32.135381,34.833362],[32.135476000000004,34.833141999999995],[32.135554,34.832944],[32.135898,34.831916],[32.136192,34.831129],[32.136421999999996,34.830501],[32.13667,34.829793],[32.136872,34.829152],[32.137034,34.828534000000005],[32.13718,34.827897],[32.137249,34.827494],[32.137339000000004,34.826944],[32.137525,34.826021000000004],[32.137704,34.825117999999996],[32.138003999999995,34.823565],[32.138065999999995,34.82326],[32.138376,34.821723999999996],[32.138523,34.821026],[32.138571999999996,34.820775],[32.138643,34.820378000000005],[32.138698,34.820018],[32.138743,34.819649],[32.138775,34.819334999999995],[32.13882,34.818661999999996],[32.138867,34.818416],[32.138884000000004,34.818333],[32.1389,34.818273],[32.138918,34.818236999999996],[32.138962,34.818191999999996],[32.13901,34.818174],[32.139131,34.818132],[32.139679,34.818042999999996],[32.141501,34.817714],[32.142965999999994,34.817357],[32.143128999999995,34.817331],[32.143138,34.817375],[32.143152,34.817402],[32.143177,34.817429],[32.14320900000001,34.817446000000004],[32.143219,34.817448],[32.143236,34.817452],[32.143278,34.817446000000004],[32.14331,34.817428],[32.143330999999996,34.817407],[32.143346,34.817382],[32.143349,34.817369],[32.143357,34.817337],[32.143355,34.817307],[32.143347,34.817277000000004],[32.143328000000004,34.817245],[32.143306,34.817225],[32.143281,34.817211],[32.143253,34.817205],[32.143821,34.814109],[32.143902000000004,34.813952],[32.143991,34.813873],[32.144271999999994,34.813792],[32.144587,34.813677],[32.144815,34.813562],[32.145042,34.813283],[32.145182,34.813034],[32.14533,34.812661999999996],[32.145452,34.812249],[32.145497,34.812021],[32.145654,34.81108],[32.145669,34.810984000000005],[32.145759999999996,34.810499],[32.145804,34.810280999999996],[32.145917,34.809705],[32.145962,34.809426],[32.145977,34.809271],[32.14598,34.809124],[32.14597,34.80891],[32.145941,34.808659999999996],[32.145912,34.80839],[32.145901,34.808245],[32.145886,34.807975],[32.145885,34.807844],[32.145953999999996,34.807528999999995],[32.145971,34.807413000000004],[32.145981,34.807306],[32.145981,34.80724],[32.145983,34.807113],[32.145989,34.807063],[32.145995,34.80706],[32.146012,34.807047],[32.146026,34.807031],[32.146034,34.807019],[32.146044,34.806998],[32.146049,34.806978],[32.146051,34.806952],[32.14605,34.806929],[32.146045,34.806907],[32.146041,34.806899],[32.146039,34.806893],[32.146032,34.806878999999995],[32.146019,34.806862],[32.146003,34.806847],[32.145987,34.806837],[32.145979,34.806833000000005],[32.145965999999994,34.806829],[32.14595300000001,34.806827],[32.145943,34.806826],[32.145926,34.806828],[32.145913,34.806831],[32.145895,34.80684],[32.145883000000005,34.806847999999995],[32.145872,34.806857],[32.145866,34.806865],[32.145790000000005,34.806869],[32.145734999999995,34.806867],[32.145616,34.806851],[32.143896999999996,34.80635],[32.143493,34.80618],[32.143405,34.806131],[32.143337,34.806071],[32.143330999999996,34.806051000000004],[32.143325,34.806036999999996],[32.143316999999996,34.806024],[32.143305,34.806009],[32.143291999999995,34.805996],[32.14328,34.805988],[32.143267,34.805982],[32.143246999999995,34.805976],[32.143234,34.805975],[32.14322,34.805975],[32.143206,34.805978],[32.143188,34.805985],[32.143175,34.805993],[32.143158,34.806007],[32.143148,34.806018],[32.143138,34.806033],[32.14307,34.806078],[32.143002,34.806090999999995],[32.142908,34.806084999999996],[32.141405999999996,34.805869],[32.141248,34.805839],[32.141134,34.805807],[32.140919,34.80574],[32.140793,34.805704],[32.140646000000004,34.805663],[32.140609000000005,34.805642999999996],[32.140578999999995,34.805613],[32.140557,34.805559],[32.140547,34.805471000000004],[32.14053,34.805296999999996],[32.140511,34.805122999999995],[32.140477000000004,34.804403],[32.140478,34.804122],[32.140495,34.803940999999995],[32.140507,34.803862],[32.140528,34.803774],[32.140556,34.803682],[32.140592,34.803584],[32.14062,34.80352],[32.140664,34.803447],[32.140721,34.803358],[32.14077,34.803284999999995],[32.140832,34.803205],[32.140889,34.803144],[32.140959,34.803079],[32.14105,34.803000000000004],[32.141135,34.802935],[32.141306,34.802758000000004],[32.141412,34.80265],[32.141523,34.802528],[32.141668,34.802322],[32.141732,34.802191],[32.141779,34.802087],[32.14181,34.801999],[32.141829,34.801903],[32.141836,34.801858],[32.141843,34.801751],[32.141843,34.801733],[32.141824,34.801635],[32.141803,34.801584000000005],[32.141760999999995,34.801526],[32.141236,34.801309],[32.140834000000005,34.801144],[32.140802,34.80113],[32.140586,34.801027000000005],[32.140319,34.800893],[32.140114000000004,34.800779],[32.139666,34.800507],[32.139309999999995,34.800256],[32.139019,34.800033],[32.138694,34.799778],[32.138209,34.799383],[32.137856,34.799098],[32.137648,34.798927],[32.137394,34.798722999999995],[32.137267,34.798621999999995],[32.137075,34.798472],[32.136889000000004,34.798336],[32.136604,34.798159999999996],[32.134184000000005,34.796853999999996],[32.134005,34.796766999999996],[32.133678,34.796649],[32.133238,34.796537],[32.133031,34.796487],[32.13268,34.796401],[32.132038,34.796259],[32.131116,34.796043],[32.130013,34.795783],[32.128541,34.795456],[32.12489,34.794752],[32.123484999999995,34.79449],[32.122783,34.794340999999996],[32.122644,34.794311],[32.1188,34.793631],[32.116601,34.793186999999996],[32.11578,34.793021],[32.114934999999996,34.792858],[32.113296000000005,34.792582],[32.113006,34.792525],[32.112685,34.792460999999996],[32.112518,34.792425],[32.112097,34.792332],[32.111014000000004,34.792128999999996],[32.110443,34.792012],[32.109863,34.79193],[32.109156,34.791886],[32.108544,34.791863],[32.108098999999996,34.791837],[32.10752,34.791849],[32.107310999999996,34.791856],[32.106899,34.79189],[32.106743,34.791906],[32.106162,34.792016],[32.105824,34.792074],[32.104446,34.792344],[32.104321,34.792371],[32.104051,34.792421999999995],[32.103802,34.792474],[32.102925,34.792606],[32.102881,34.792614],[32.102828,34.792626],[32.102667,34.792664],[32.102307,34.792747999999996],[32.102176,34.792771],[32.102002,34.792806],[32.101698999999996,34.792877000000004],[32.101659000000005,34.792885999999996],[32.101498,34.792925],[32.100984000000004,34.793062],[32.100521,34.793175],[32.099919,34.793296999999995],[32.099846,34.79332],[32.099804,34.793326],[32.099695000000004,34.793345],[32.099259,34.793392],[32.099001,34.793418],[32.098015000000004,34.793507],[32.097852,34.793532],[32.097534,34.793593],[32.097143,34.79371],[32.097083000000005,34.793728],[32.097002,34.793752000000005],[32.096765999999995,34.793819],[32.095290999999996,34.794215],[32.094516999999996,34.794422999999995],[32.092521000000005,34.794895000000004],[32.091714,34.795063],[32.091268,34.79518],[32.091161,34.795215999999996],[32.090872999999995,34.795257],[32.090418,34.795344],[32.090198,34.795365999999994],[32.089921999999994,34.795402],[32.089565,34.795435],[32.089203999999995,34.795459],[32.089012,34.795473],[32.088640000000005,34.79548],[32.088529,34.795484],[32.088159000000005,34.795483000000004],[32.087701,34.795473],[32.087206,34.795412],[32.086815,34.795390999999995],[32.086425,34.795325],[32.086139,34.795246999999996],[32.085776,34.795159999999996],[32.085698,34.795134000000004],[32.085324,34.79507],[32.083354,34.794706],[32.082993,34.794624],[32.082683,34.794544],[32.082568,34.794514],[32.081928000000005,34.794366],[32.080563,34.794089],[32.080147,34.793981],[32.079971,34.793907],[32.079799,34.793822],[32.079574,34.793690000000005],[32.079373,34.793544],[32.079178999999996,34.793393],[32.078631,34.792814],[32.078497,34.792640999999996],[32.078348,34.792438],[32.078171000000005,34.792142],[32.078037,34.791866999999996],[32.077888,34.791461],[32.077847999999996,34.791339],[32.077664,34.790787],[32.077521000000004,34.790354],[32.077413,34.790026],[32.077129,34.789168],[32.07703,34.788872],[32.076999,34.788781],[32.076655,34.787775],[32.076414,34.787081],[32.076021999999995,34.785906],[32.075893,34.785416999999995],[32.075773,34.784833],[32.075718,34.784442999999996],[32.07571,34.784356],[32.0757,34.784239],[32.075671,34.783912],[32.075639,34.783406],[32.075616,34.782823],[32.075586,34.782014000000004],[32.075577,34.781779],[32.075573999999996,34.781703],[32.075928999999995,34.781647],[32.076256,34.781578],[32.076863,34.781459000000005],[32.07752,34.781374],[32.077574,34.781364],[32.077812,34.781355],[32.078163,34.781341999999995],[32.078519,34.781343],[32.079471000000005,34.781357],[32.079563,34.781357],[32.079559,34.781183],[32.079558,34.781128],[32.079553999999995,34.780964000000004],[32.079556,34.78054],[32.079558,34.780053],[32.079558,34.77997],[32.079559,34.779859],[32.079559,34.779756],[32.079565,34.779538],[32.079567,34.779489],[32.079578999999995,34.779209],[32.079584000000004,34.779123999999996],[32.079505,34.779125],[32.079411,34.77913],[32.079308000000005,34.779119],[32.079243,34.779078000000005],[32.07906,34.778884999999995],[32.078941,34.77876],[32.078878,34.778690000000005],[32.078808,34.778605999999996],[32.078275,34.778077],[32.078241,34.778044],[32.07819,34.778024],[32.078146000000004,34.778011],[32.07809,34.778034000000005],[32.078049,34.778063],[32.07793,34.778207],[32.077346,34.777729],[32.077213,34.777625],[32.076274,34.776893],[32.076021000000004,34.776680999999996],[32.075589,34.776379],[32.075478000000004,34.776308],[32.0752,34.776128],[32.074795,34.775863],[32.074548,34.775729],[32.074413,34.775656],[32.074335999999995,34.775575],[32.074059000000005,34.775381],[32.073972,34.775327000000004],[32.07375,34.775195000000004],[32.073588,34.775096000000005],[32.073427,34.774994],[32.073301,34.774907],[32.073074,34.774736],[32.072868,34.774547],[32.072787,34.774464],[32.072536,34.774194],[32.072432,34.774118],[32.072096,34.773694],[32.07173,34.773225],[32.071621,34.773078999999996],[32.071328,34.772682],[32.071205,34.772515999999996],[32.071121999999995,34.772413],[32.07089000000001,34.772118],[32.070709,34.771863],[32.070378999999996,34.771322999999995],[32.070246999999995,34.771105],[32.06988,34.770503999999995],[32.069256,34.770685],[32.068417,34.770879],[32.067574,34.77122],[32.06729,34.771337],[32.067001,34.771456],[32.066472999999995,34.771701],[32.065882,34.771971],[32.065348,34.772211],[32.065232,34.771855],[32.064953,34.771006],[32.064901,34.770839],[32.064858,34.770658000000005],[32.064813,34.770432],[32.064701,34.769639],[32.064686,34.769467],[32.06464896574694,34.769237936286636]],"stops":[{"coords":[32.176398,34.903889],"id":"37030"},{"coords":[32.177245,34.900307],"id":"37028"},{"coords":[32.177977,34.897175],"id":"37019"},{"coords":[32.177906,34.894049],"id":"37018"},{"coords":[32.174882000000004,34.890699],"id":"37119"},{"coords":[32.125721999999996,34.85403],"id":"26835"},{"coords":[32.135579,34.833007],"id":"20377"},{"coords":[32.143364,34.816839],"id":"26744"},{"coords":[32.140522,34.804401],"id":"26701"},{"coords":[32.140196,34.800765999999996],"id":"20112"},{"coords":[32.136707,34.798164],"id":"20105"},{"coords":[32.132818,34.796381],"id":"20099"},{"coords":[32.12212,34.794165],"id":"20064"},{"coords":[32.111697,34.792204],"id":"20047"},{"coords":[32.101566,34.792854],"id":"25071"},{"coords":[32.095376,34.794137],"id":"21188"},{"coords":[32.090293,34.795303000000004],"id":"21534"},{"coords":[32.085267,34.795006],"id":"20348"},{"coords":[32.081367,34.794199],"id":"20349"},{"coords":[32.077809,34.791077],"id":"25732"},{"coords":[32.076736,34.787867999999996],"id":"21544"},{"coords":[32.075664,34.782893],"id":"21150"},{"coords":[32.0796,34.780657],"id":"21520"},{"coords":[32.076896999999995,34.777315],"id":"25617"},{"coords":[32.07329,34.774834999999996],"id":"21543"},{"coords":[32.071897,34.773361],"id":"25556"},{"coords":[32.067985,34.770998],"id":"27228"},{"coords":[32.065619,34.772033],"id":"22988"},{"coords":[32.064693,34.769228000000005],"id":"25485"}]},{"from":[32.064693,34.769228000000005],"instruction":"walk","meters":300.5084740387086,"to":[32.0629359110397,34.77165098302067]}],[{"from":[32.17524384183428,34.90229572635145],"instruction":"walk","meters":197.37449647353898,"to":[32.176398,34.903889]},{"alternative":"#","instruction":"take bus","line_number":"231","long_name":"\u05d0\u05d9\u05d6\u05d5\u05e8 \u05d4\u05ea\u05e2\u05e9\u05d9\u05d4 \u05db\u05e4\u05e8 \u05e1\u05d1\u05d0-\u05db\u05e4\u05e8 \u05e1\u05d1\u05d0<->\u05ea. \u05de\u05e8\u05db\u05d6\u05d9\u05ea \u05ea''\u05d0/\u05dc\u05d5\u05d9\u05e0\u05e1\u05e7\u05d9-\u05ea\u05dc \u05d0\u05d1\u05d9\u05d1 \u05d9\u05e4\u05d5-1#","shape":[[32.17635426084827,34.903875551649456],[32.1765,34.903214],[32.176536,34.903065999999995],[32.176548,34.903017],[32.17661,34.902731],[32.176642,34.902594],[32.176683000000004,34.902421000000004],[32.176772,34.902108],[32.177025,34.901052],[32.177116999999996,34.900657],[32.177268,34.900005],[32.177388,34.899522],[32.177440999999995,34.899308000000005],[32.177595000000004,34.898617],[32.177793,34.897724],[32.17803,34.896774],[32.178045000000004,34.896716],[32.178164,34.896146],[32.178304,34.895627000000005],[32.178379,34.895373],[32.178399,34.895308],[32.178488,34.89509],[32.17855,34.894967],[32.178589,34.894886],[32.178529,34.894819],[32.17835,34.894616],[32.177015000000004,34.893131],[32.175821,34.891796],[32.175424,34.891321999999995],[32.175325,34.891224],[32.175067999999996,34.890992],[32.174958000000004,34.890865999999995],[32.175362,34.890434],[32.175634,34.890112],[32.17603,34.890546],[32.175651,34.890905],[32.175325,34.891224],[32.175216999999996,34.891335],[32.174890999999995,34.891653999999996],[32.174399,34.892144],[32.173994,34.892527],[32.173783,34.892755],[32.173429,34.893145000000004],[32.173312,34.893240999999996],[32.173244,34.893281],[32.173235,34.893285],[32.173183,34.893309],[32.173136,34.893318],[32.173076,34.893328000000004],[32.172979,34.89333],[32.172791,34.893321],[32.172571000000005,34.893326],[32.172487,34.893328000000004],[32.172317,34.893329],[32.17216,34.893330999999996],[32.172048,34.893351],[32.171956,34.89337800000001],[32.171781,34.893446999999995],[32.171665999999995,34.893479],[32.171277,34.89351],[32.171103,34.893518],[32.170906,34.893532],[32.170512,34.893561],[32.169911,34.893603999999996],[32.169739,34.893615999999994],[32.168972,34.893668],[32.168845000000005,34.893677000000004],[32.168579,34.893692],[32.16814,34.893706],[32.167813,34.893685999999995],[32.167363,34.893747],[32.167159999999996,34.893774],[32.165479,34.8939],[32.165110999999996,34.893925],[32.164736,34.893951],[32.164014,34.893994],[32.163521,34.894023],[32.163177000000005,34.894042999999996],[32.162814000000004,34.894067],[32.161327,34.894158000000004],[32.160835999999996,34.894179],[32.160333,34.894202],[32.159146,34.894265999999995],[32.158947,34.89428],[32.158384000000005,34.894315999999996],[32.157848,34.894352000000005],[32.15663,34.894432],[32.156441,34.894445000000005],[32.155971,34.89445300000001],[32.155846999999994,34.894458],[32.155778000000005,34.894467],[32.154462,34.894571],[32.15433400000001,34.894576],[32.154109000000005,34.894597999999995],[32.153751,34.894621],[32.153349,34.894633],[32.152994,34.894672],[32.152501,34.894683],[32.152060999999996,34.894675],[32.151565999999995,34.894653999999996],[32.151005,34.894651],[32.150919,34.894648],[32.150476,34.894641],[32.150033,34.894634],[32.149529,34.894626],[32.149066,34.894594],[32.148388,34.894579],[32.147290000000005,34.89454],[32.146907,34.894527000000004],[32.144236,34.894442],[32.144143,34.894436],[32.143799,34.89443],[32.143702000000005,34.894427],[32.143475,34.894422],[32.141294,34.894384],[32.140938,34.894403999999994],[32.140728,34.894434000000004],[32.140612,34.894451000000004],[32.140203,34.894546000000005],[32.13994,34.894635],[32.139468,34.894835],[32.139173,34.894991999999995],[32.139029,34.895081],[32.138940999999996,34.895136],[32.138762,34.895264000000005],[32.138621,34.895355],[32.138001,34.895827000000004],[32.137796,34.895976],[32.1365,34.896907],[32.134485999999995,34.898406],[32.133288,34.899328999999994],[32.132928,34.899628],[32.132852,34.899681],[32.132534,34.899904],[32.131871000000004,34.900401],[32.13084,34.901207],[32.130549,34.901424],[32.130427000000005,34.901508],[32.130192,34.901694],[32.130084000000004,34.90178],[32.129242,34.902459],[32.129163,34.902525],[32.128983000000005,34.902675],[32.12865,34.902916],[32.128309,34.903153],[32.128033,34.903324],[32.127772,34.903465999999995],[32.127456,34.903614000000005],[32.127071,34.903737],[32.126762,34.903819],[32.126352000000004,34.903872],[32.1262,34.903882],[32.125842999999996,34.903883],[32.125487,34.903866],[32.125478,34.903865],[32.124901,34.903794],[32.124732,34.903774],[32.124513,34.903746999999996],[32.123039,34.90358],[32.122823,34.903507],[32.122761,34.903483],[32.122565,34.903465000000004],[32.12239,34.903437],[32.122304,34.903385],[32.122234999999996,34.903294],[32.122199,34.903220000000005],[32.122168,34.903057000000004],[32.122132,34.902843],[32.122056,34.902324],[32.121967,34.90185],[32.121911,34.901317],[32.121927,34.900828000000004],[32.121953999999995,34.900215],[32.122021999999994,34.899336],[32.122063,34.899023],[32.122107,34.898677],[32.122214,34.897882],[32.122403999999996,34.896359000000004],[32.12247,34.89586],[32.122583,34.894981],[32.122642,34.893977],[32.122640999999994,34.893958000000005],[32.12263,34.892771],[32.122569,34.892011],[32.122471000000004,34.891275],[32.122316999999995,34.890371],[32.122105,34.889507],[32.121825,34.888599],[32.121790999999995,34.888501],[32.121621000000005,34.888011],[32.121553999999996,34.887839],[32.121383,34.887414],[32.12125,34.88711],[32.121118,34.886859],[32.120832,34.886336],[32.120162,34.885093],[32.119721999999996,34.884335],[32.119147999999996,34.883269],[32.118853,34.882729],[32.118571,34.882135999999996],[32.118359999999996,34.881626000000004],[32.118221999999996,34.88125],[32.118019,34.880538],[32.117940999999995,34.880215],[32.117837,34.879718],[32.117779999999996,34.879354],[32.117739,34.878959],[32.117736,34.878881],[32.117729,34.878703],[32.117707,34.878137],[32.117706,34.87761],[32.117726,34.877145],[32.117768,34.876515000000005],[32.117815,34.876137],[32.117897,34.875681],[32.117987,34.875236],[32.118207,34.874463],[32.118341,34.874022],[32.118557,34.873428000000004],[32.118974,34.872308000000004],[32.119079,34.872035],[32.11922,34.871666],[32.119653,34.870537],[32.120045000000005,34.869525],[32.120430999999996,34.868463],[32.120552,34.868061],[32.120670000000004,34.867609],[32.120711,34.867425],[32.120733,34.867325],[32.120787,34.867083],[32.12079,34.867065000000004],[32.120844,34.866713],[32.121010999999996,34.865759000000004],[32.121091,34.865325],[32.121117,34.865151000000004],[32.121232,34.864484000000004],[32.121308,34.864045000000004],[32.121373999999996,34.863721999999996],[32.121459,34.863389],[32.121557,34.863045],[32.121735,34.862462],[32.122026,34.861697],[32.122071000000005,34.861599],[32.122365,34.860965],[32.122746,34.860157],[32.123231,34.859118],[32.123822,34.857808],[32.124245,34.856807],[32.124463,34.856291],[32.12454,34.856107],[32.124606,34.855951],[32.124701,34.855728000000006],[32.12493,34.855184],[32.125271999999995,34.854414],[32.127028,34.85022],[32.127697999999995,34.848731],[32.128377,34.847148],[32.128849,34.846108],[32.13029,34.8426],[32.130807,34.841426],[32.130905,34.841201],[32.13234,34.837786],[32.13263,34.837118],[32.132971999999995,34.836406],[32.133153,34.836067],[32.133269,34.835871000000004],[32.133528000000005,34.835446999999995],[32.133666999999996,34.835264],[32.133845,34.835051],[32.134081,34.834786],[32.134275,34.834587],[32.134528,34.834359],[32.134686,34.834216999999995],[32.134839,34.834070000000004],[32.134958000000005,34.833933],[32.135034000000005,34.833822],[32.135075,34.833746000000005],[32.135085,34.833677],[32.135082000000004,34.833636],[32.135076,34.83361],[32.135071,34.833587],[32.135047,34.833543],[32.134977,34.833442],[32.134681,34.833265999999995],[32.134561,34.8332],[32.134275,34.833022],[32.134192,34.832978000000004],[32.133722999999996,34.832646999999994],[32.133101,34.832206],[32.132887,34.832071],[32.132721999999994,34.831967],[32.132372,34.831749],[32.131583,34.83117],[32.131365,34.83101],[32.131263,34.830942],[32.130977,34.830763],[32.13084,34.830658],[32.130728999999995,34.830575],[32.130367,34.830304999999996],[32.129738,34.829758],[32.129373,34.829415000000004],[32.128351,34.828452],[32.128285999999996,34.828390999999996],[32.12788,34.827973],[32.126471,34.826526],[32.124684,34.824769],[32.124505,34.824548],[32.124339,34.824372],[32.124266,34.824307],[32.124047,34.824129],[32.123961,34.824069],[32.123435,34.823721],[32.123129,34.823533000000005],[32.122981,34.823440000000005],[32.122821,34.823279],[32.122681,34.823137],[32.122538,34.822959000000004],[32.122059,34.822196000000005],[32.121635999999995,34.821428000000004],[32.121245,34.820718],[32.121074,34.820448],[32.120976,34.820304],[32.120841999999996,34.820127],[32.120779,34.820044],[32.120653999999995,34.819897999999995],[32.120346000000005,34.819590999999996],[32.120290999999995,34.819536],[32.120142,34.819418],[32.119939,34.81926],[32.119819,34.819165999999996],[32.119534,34.818946000000004],[32.119201000000004,34.818689],[32.118781,34.818419],[32.118459,34.818258],[32.118337,34.818193],[32.118327,34.818188],[32.11804,34.818032],[32.11747800000001,34.817739],[32.117422999999995,34.817717],[32.116603000000005,34.817386],[32.11615,34.817218],[32.115809999999996,34.817124],[32.115643,34.817087],[32.115557,34.817067],[32.115331,34.817018],[32.114474,34.816826],[32.113839,34.816728000000005],[32.113655,34.816711],[32.113128,34.816662],[32.112282,34.816584999999996],[32.111983,34.816549],[32.111449,34.816492],[32.111181,34.816462],[32.110919,34.81642],[32.110838,34.816401],[32.110690999999996,34.816365999999995],[32.110293,34.816259],[32.109962,34.816138],[32.109390999999995,34.81589],[32.109181,34.815764],[32.109101,34.815715999999995],[32.108665,34.815441],[32.108275,34.815169],[32.107934,34.814918],[32.107894,34.814886],[32.107852,34.814842],[32.107531,34.81457],[32.107469,34.814514],[32.107012,34.814099],[32.106846999999995,34.813911],[32.106496,34.813511],[32.106398999999996,34.813417],[32.106092,34.81303],[32.105575,34.812379],[32.105571000000005,34.812375],[32.105263,34.811915],[32.105086,34.811645],[32.105011,34.811510999999996],[32.104721999999995,34.810996],[32.104459999999996,34.810528999999995],[32.104273,34.810114],[32.104223,34.810004],[32.10419,34.809934000000005],[32.104054999999995,34.809653000000004],[32.103915,34.809345],[32.103852,34.809207],[32.103378,34.808048],[32.103187,34.80753],[32.10303,34.807054],[32.102835999999996,34.806463],[32.102823,34.806418],[32.102724,34.806049],[32.10256500000001,34.805464],[32.102455,34.804969],[32.102357,34.804533],[32.10229,34.804237],[32.10228,34.804193],[32.102252,34.804065],[32.102222999999995,34.803943],[32.102062,34.803236],[32.102019,34.803053999999996],[32.102011,34.803015],[32.101841,34.802257],[32.101821,34.802166],[32.101690999999995,34.801594],[32.101405,34.800289],[32.101327000000005,34.79994],[32.101219,34.799427],[32.101186,34.799278],[32.100877000000004,34.797912],[32.100662,34.796906],[32.100584999999995,34.796569],[32.100513,34.796136],[32.100446999999996,34.795771],[32.100218,34.794644],[32.100115,34.794140999999996],[32.099965000000005,34.79349000000001],[32.099919,34.793296999999995],[32.099802000000004,34.792722999999995],[32.099426,34.791045000000004],[32.099319,34.790507],[32.099263,34.790302000000004],[32.099229,34.790166],[32.099077,34.789429],[32.099061,34.789321],[32.099049,34.789229999999996],[32.099033,34.789013],[32.099000000000004,34.7886],[32.098946999999995,34.78772],[32.098911,34.787106],[32.098835,34.785695000000004],[32.098733,34.783945],[32.098724,34.783552],[32.09872,34.783378000000006],[32.098718,34.783302],[32.09871500000001,34.783167999999996],[32.098711,34.783066],[32.098665000000004,34.78203],[32.098636,34.781356],[32.098632,34.781234000000005],[32.098597,34.780674],[32.098551,34.77998],[32.098537,34.779878000000004],[32.098504,34.779627000000005],[32.09845,34.779294],[32.09839,34.779003],[32.098388,34.778991],[32.098327000000005,34.778766],[32.098299,34.778659000000005],[32.098187,34.77831],[32.098127000000005,34.778117],[32.098026000000004,34.777811],[32.097986999999996,34.777692],[32.097978999999995,34.777664],[32.097747999999996,34.777033],[32.097715,34.776943],[32.097688,34.776868],[32.097509,34.776376],[32.097425,34.776158],[32.097328000000005,34.775903],[32.09724,34.77590900000001],[32.097091999999996,34.775915000000005],[32.096965999999995,34.775929],[32.096653,34.77597],[32.096523,34.775987],[32.09601,34.776057],[32.095659000000005,34.776182],[32.094818,34.776459],[32.094243,34.776722],[32.094184999999996,34.776734999999995],[32.094117,34.776734000000005],[32.093070000000004,34.776461],[32.092478,34.776309000000005],[32.092407,34.776292],[32.092314,34.776270000000004],[32.091786,34.776144],[32.091608,34.776109000000005],[32.090342,34.775797999999995],[32.090074,34.775715000000005],[32.089277,34.775517],[32.088396,34.77531],[32.088128000000005,34.775247],[32.087794,34.775158000000005],[32.086899,34.774929],[32.086379,34.774798],[32.086098,34.774727],[32.085814,34.774667],[32.085094,34.774479],[32.084466,34.774313],[32.084386,34.774291999999996],[32.084302,34.774269],[32.083713,34.774148],[32.083027,34.774001],[32.081783,34.773809],[32.079743,34.773827000000004],[32.079303,34.773897999999996],[32.079048,34.77394],[32.07862,34.77401500000001],[32.07813,34.774141],[32.078022999999995,34.774177],[32.077903000000006,34.774215999999996],[32.077829,34.774231],[32.077566999999995,34.774299],[32.07741,34.774333],[32.076884,34.774478],[32.076005,34.77479],[32.075952,34.774814],[32.075751000000004,34.774904],[32.075654,34.774991],[32.075627000000004,34.775015],[32.075603,34.775036],[32.075492,34.775134],[32.075287,34.775315],[32.075175,34.775414000000005],[32.075084999999994,34.775494],[32.075078999999995,34.775498],[32.075055,34.77552],[32.075026,34.775546999999996],[32.074993,34.775579],[32.074795,34.775863],[32.074548,34.775729],[32.074413,34.775656],[32.074335999999995,34.775575],[32.074059000000005,34.775381],[32.073972,34.775327000000004],[32.07375,34.775195000000004],[32.073588,34.775096000000005],[32.073427,34.774994],[32.073301,34.774907],[32.073074,34.774736],[32.072868,34.774547],[32.072787,34.774464],[32.072536,34.774194],[32.072432,34.774118],[32.072096,34.773694],[32.07173,34.773225],[32.071621,34.773078999999996],[32.071328,34.772682],[32.071205,34.772515999999996],[32.071121999999995,34.772413],[32.07089000000001,34.772118],[32.070709,34.771863],[32.070378999999996,34.771322999999995],[32.070246999999995,34.771105],[32.06988,34.770503999999995],[32.069256,34.770685],[32.068417,34.770879],[32.067574,34.77122],[32.06729,34.771337],[32.067001,34.771456],[32.066472999999995,34.771701],[32.065882,34.771971],[32.065348,34.772211],[32.064788,34.772455],[32.06462457905468,34.772526027478]],"stops":[{"coords":[32.176398,34.903889],"id":"37030"},{"coords":[32.177245,34.900307],"id":"37028"},{"coords":[32.177977,34.897175],"id":"37019"},{"coords":[32.177906,34.894049],"id":"37018"},{"coords":[32.173774,34.892692],"id":"30300"},{"coords":[32.162325,34.894044],"id":"33845"},{"coords":[32.158634,34.894247],"id":"32996"},{"coords":[32.154645,34.894503],"id":"37206"},{"coords":[32.146553000000004,34.894463],"id":"37208"},{"coords":[32.143188,34.894364],"id":"32734"},{"coords":[32.137303,34.896268],"id":"37209"},{"coords":[32.132375,34.89996],"id":"37254"},{"coords":[32.128739,34.902789],"id":"37153"},{"coords":[32.122114,34.902412],"id":"39751"},{"coords":[32.132715000000005,34.831902],"id":"21633"},{"coords":[32.128115,34.828144],"id":"21219"},{"coords":[32.125763,34.825759999999995],"id":"20195"},{"coords":[32.121877000000005,34.821768],"id":"21565"},{"coords":[32.12048,34.819656],"id":"21525"},{"coords":[32.117934999999996,34.81792],"id":"26707"},{"coords":[32.115783,34.817064],"id":"26703"},{"coords":[32.112324,34.816536],"id":"26427"},{"coords":[32.110352,34.81622],"id":"26424"},{"coords":[32.107454,34.814433],"id":"21716"},{"coords":[32.105529,34.812227],"id":"22919"},{"coords":[32.104601,34.810684],"id":"23074"},{"coords":[32.102578,34.805312],"id":"21718"},{"coords":[32.096871,34.775888],"id":"22920"},{"coords":[32.091443,34.776014],"id":"25833"},{"coords":[32.08873,34.775334],"id":"25830"},{"coords":[32.085415000000005,34.774508000000004],"id":"25787"},{"coords":[32.080952,34.773763],"id":"25774"},{"coords":[32.075423,34.775129],"id":"25565"},{"coords":[32.07329,34.774834999999996],"id":"21543"},{"coords":[32.068606,34.770781],"id":"22989"},{"coords":[32.064609000000004,34.772476],"id":"23020"}]},{"from":[32.064609000000004,34.772476],"instruction":"walk","meters":201.6298929102967,"to":[32.0629359110397,34.77165098302067]}]]}

const CLICK_TYPE = {
    FROM: 'FROM',
    TO: 'TO',
    NONE: 'NONE'
};

class Map extends Component {
    constructor(props) {
        super(props);

        this.state = {
            linesData: null,
            tripIdOrder: [],
            nextClickType: CLICK_TYPE.NONE,
            // from: null,
            // to: null,
            loading: false,
            from: {lat: 32.17524384183428, lng: 34.90229572635145},
            to: {lat: 32.0629359110397, lng: 34.77165098302067},
            favoritePoints: [{
                id: '123',
                name: 'Home',
                lat: 32.17524384183428,
                lng: 34.90229572635145
            },{
                id: '456',
                name: 'work',
                lat: 32.0629359110397,
                lng: 34.77165098302067
            }]
        };
    }

    componentDidMount() {
        this.getLines();
    }

    getLines = async () => {
        const fromPos = this.state.from;
        const toPos = this.state.to;
        if (fromPos && toPos) {
            this.setState({loading: true});
            // const res = await axios.get(`http://192.168.200.105:5000/query?start=${fromPos.lat},${fromPos.lng}&end=${toPos.lat},${toPos.lng}`);
            // const {data} = res;
            const data = res;
            const tripIdOrder = [];
            data.trips.forEach((t, i) => {
                t.id = i;
                tripIdOrder.push(t.id);
                t.forEach((s, i) => s.id = i);
            });
            this.setState({linesData: data, tripIdOrder, loading: false});
        }
    };

    handleLineClick(tripId) {
        this.setState({tripIdOrder: [...this.state.tripIdOrder.filter(id => id !== tripId), tripId]});
        // console.log('Class: Map, Function: handleLineClick, Line 70', e.target.options.leaflet.layerContainer.options.children);
        // e.target.bringToFront();
    }

    renderLineStop(step, stop, lineColor) {
        return (
            <CircleMarker key={Math.random()} center={stop.coords} radius={7}
                          color={lineColor}
                          fillColor={lineColor} weight={1} fill fillOpacity={1}>
                <Tooltip sticky>{stop.id}</Tooltip>
            </CircleMarker>
        );
    }

    renderWalkStep(step, tripId, lineColor) {
        return (
            <Polyline key={Math.random()} positions={[step.from, step.to]} weight={5} color={lineColor} dashArray="10" onClick={() => this.handleLineClick(tripId)}>
                <Tooltip sticky>{`Walk ${Math.round(step.meters)} meters`}</Tooltip>
            </Polyline>
        );
    }

    renderBusStep(step, tripId, lineColor) {
        return (
            [
            <Polyline key={Math.random()} positions={step.shape} weight={9} color={lineColor} onClick={() => this.handleLineClick(tripId)}>
                <Tooltip sticky>{`${step.line_number} -> ${step.long_name}`}</Tooltip>
            </Polyline>,
                ...step.stops.map(stop => this.renderLineStop(step, stop, lineColor))
            ]
        )
    }

    renderTripStep = (step, tripId, lineColor) => {
        if (step.instruction === 'walk') {
            return this.renderWalkStep(step, tripId, lineColor);
        } else if (step.instruction === 'take bus') {
            return this.renderBusStep(step, tripId, lineColor);
        }
    };

    renderTrip = (trip) => {
        const lineColor = colors[trip.id % colors.length];
        return trip.map(step => this.renderTripStep(step, trip.id, lineColor));
        // return (
        //     <LayerGroup>
        //         {trip.map(step => this.renderTripStep(step, trip.id, lineColor))}
        //     </LayerGroup>
        // );
    };

    renderRoutes() {
        if (this.state.linesData && this.state.linesData.trips && this.state.linesData.trips.length) {
            return this.state.tripIdOrder.map(id => this.renderTrip(this.state.linesData.trips.find(t => t.id === id)));
        }
        return null;
    }

    renderFavoriteMarkers() {
        const markers = [];
        if (this.state.favoritePoints && this.state.favoritePoints.length) {
            this.state.favoritePoints.forEach(point => {
                markers.push(this.renderMarker(point, null, point.name, point.id, null, () => {
                    switch (this.state.nextClickType) {
                        case CLICK_TYPE.FROM:
                            this.setState({from: point, nextClickType: CLICK_TYPE.TO});
                            this.getLines();
                            break;
                        case CLICK_TYPE.TO:
                            this.setState({to: point, nextClickType: CLICK_TYPE.NONE});
                            this.getLines();
                            break;
                        default:
                            break;
                    }
                }))
            })
        }
        return markers;
    }

    renderRouteMarkers() {
        const markers = [];

        if (this.state.from) {
            markers.push(this.renderMarker(this.state.from, 'From', null, 'from-marker', (e) => {
                this.setState({from: e.target._latlng}, this.getLines);
            }))
        }
        if (this.state.to) {
            markers.push(this.renderMarker(this.state.to, 'To', null, 'to-marker', (e) => {
                this.setState({to: e.target._latlng}, this.getLines);
            }))
        }
        return markers;
    }

    renderMarker(position, popupText, text, key, handleMoveEnd, handleOnClick) {
        return (
            <Marker position={position} key={key} draggable={!!handleMoveEnd} onMoveEnd={handleMoveEnd} onClick={handleOnClick}>
                {popupText && <Popup>{popupText}</Popup>}
                {text && <Tooltip direction='right' offset={[-8, -2]} opacity={1} permanent>
                    <span>{text}</span>
                </Tooltip>}
            </Marker>
        )
    }

    handleMapClick = (e) => {
        switch (this.state.nextClickType) {
            case CLICK_TYPE.FROM:
                this.setState({from: e.latlng, nextClickType: CLICK_TYPE.TO});
                this.getLines();
                break;
            case CLICK_TYPE.TO:
                this.setState({to: e.latlng, nextClickType: CLICK_TYPE.NONE});
                this.getLines();
                break;
            default:
                break;
        }
    };

    renderSelectMessage() {
        if (this.state.nextClickType === CLICK_TYPE.NONE) {
            return null;
        }
        const message = this.state.nextClickType === CLICK_TYPE.FROM ? 'Choose starting point' : 'Choose end point';
        return (
            <div className="Map-select-message">
                <div className="Map-select-message-text">
                    {message}
                </div>
            </div>
        )
    }

    startNavigation = () => {
        this.setState({nextClickType: CLICK_TYPE.FROM, from: null, to: null, linesData: null});
    };

    renderNavigationButton() {
        return (
            <button className="Map-navigate-button" onClick={this.startNavigation}>
                Directions
            </button>
        );
    }

    renderEmptyMessage() {
        if (this.state.from && this.state.to && !this.state.loading && !(this.state.linesData && this.state.linesData.trips && this.state.linesData.trips.length)) {
            return (
                <div className="Map-empty-message">
                    <div className="Map-empty-message-text">
                        No Lines found
                    </div>
                </div>
            )
        }
        return null;
    }

    render() {
        return (
          <div className="Map">
              {this.renderSelectMessage()}
              {this.renderEmptyMessage()}
              {this.renderNavigationButton()}
              <LeafletMap center={position} zoom={13} onClick={this.handleMapClick}>
                  <TileLayer
                      url="https://{s}.basemaps.cartocdn.com/rastertiles/voyager_labels_under/{z}/{x}/{y}{r}.png"
                      attribution="&copy; <a href=&quot;http://osm.org/copyright&quot;>OpenStreetMap</a> contributors"
                  />
                  <LayersControl>
                      <Overlay name="Directions">
                          <LayerGroup>
                              {this.renderRoutes()}
                              {this.renderRouteMarkers()}
                          </LayerGroup>
                      </Overlay>
                      <Overlay name="Favorites">
                          <LayerGroup>
                              {this.renderFavoriteMarkers()}
                          </LayerGroup>
                      </Overlay>
                      {/*{Add layers: bus stops, heat map, live location}*/}
                  </LayersControl>

              </LeafletMap>
          </div>
        );
    }
}

export default Map;
